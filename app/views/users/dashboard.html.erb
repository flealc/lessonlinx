<h1><%= "Dashboard" %></h1>

<h3>This week's lessons</h3>

<div class="row">
  <div class="col-4">
    <div id="list-example" class="list-group">
      <% current_user.lessons.this_week.each do |lesson| %>
        <%= link_to "#{ lesson.student.full_name }", student_lessons_path(lesson.student.id), data: { turbo_frame: "lesson-content" }, class: "list-group-item list-group-item-action" %>
      <% end %>
    </div>
  </div>
  <div class="col-8">
    <turbo-frame id="lesson-content">
      <nav id="navbar-example2" class="navbar bg-body-tertiary px-3 mb-3">
      <a class="navbar-brand" href="#"> Welcome! </a>
      <div class="navbar-brand">No lessons to display</div>
    </nav>
    </turbo-frame>
  </div>
</div>

<div class="container">
  <div class="h5">Recent students</div>
  <% current_user.taught_lessons.limit(10).each do |lesson| %>
    <div>
      <%= link_to lesson.student.full_name, student_path(lesson.student) %>
      <%= link_to "Message student", lesson.student.preferred_communication_method == "phone" ? "sms:#{lesson.student.preferred_contact_info}" : "mailto:#{lesson.student.preferred_contact_info}" %>
    </div>
  <% end %>
</div>

<div class="container">
  <div class="h5">Lessons to log</div>
  <% current_user.past_lessons.scheduled.each do |lesson| %>
    <div>
      <%= link_to lesson.student.full_name, student_path(lesson.student) %>
      <%= link_to "Log lesson", edit_lesson_path(lesson, { status: "taught" }) %>
    </div>
  <% end %>
</div>
